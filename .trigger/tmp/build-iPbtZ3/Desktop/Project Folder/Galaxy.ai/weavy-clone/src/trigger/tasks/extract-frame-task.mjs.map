{
  "version": 3,
  "sources": ["../../../../../../../../../../src/trigger/tasks/extract-frame-task.ts"],
  "sourcesContent": ["import { task } from \"@trigger.dev/sdk/v3\";\r\n// Note: In production, you'd use ffmpeg for video frame extraction\r\n// For now, this is a placeholder that handles video URLs\r\n\r\ninterface ExtractFramePayload {\r\n    videoUrl: string;\r\n    timestamp: string;\r\n    nodeId: string;\r\n    runId: string;\r\n}\r\n\r\nexport const extractFrameTask = task({\r\n    id: \"extract-frame\",\r\n    maxDuration: 120,\r\n    retry: {\r\n        maxAttempts: 2,\r\n    },\r\n    run: async (payload: ExtractFramePayload) => {\r\n        const { videoUrl, timestamp, nodeId, runId } = payload;\r\n\r\n        // Validate inputs\r\n        if (!videoUrl) {\r\n            throw new Error(\"Video URL is required\");\r\n        }\r\n\r\n        // Parse timestamp (format: \"HH:MM:SS\" or \"SS\")\r\n        let timestampSeconds = 0;\r\n        if (timestamp.includes(\":\")) {\r\n            const parts = timestamp.split(\":\").map(Number);\r\n            if (parts.length === 3) {\r\n                timestampSeconds = parts[0] * 3600 + parts[1] * 60 + parts[2];\r\n            } else if (parts.length === 2) {\r\n                timestampSeconds = parts[0] * 60 + parts[1];\r\n            }\r\n        } else {\r\n            timestampSeconds = parseFloat(timestamp) || 0;\r\n        }\r\n\r\n        // In a real implementation, you would use ffmpeg to extract the frame\r\n        // For now, return a placeholder indicating the task was processed\r\n        // You could integrate with:\r\n        // 1. A cloud service like Transloadit\r\n        // 2. Run ffmpeg in the task runtime\r\n        // 3. Use a serverless video processing service\r\n\r\n        return {\r\n            nodeId,\r\n            runId,\r\n            frameUrl: videoUrl, // Placeholder - would be actual frame URL\r\n            timestamp: timestampSeconds,\r\n            status: \"frame_extraction_placeholder\",\r\n            message: \"Frame extraction requires ffmpeg integration. Video URL preserved.\",\r\n        };\r\n    },\r\n});\r\n"],
  "mappings": ";;;;;;;;;AAAA;AAWO,IAAM,mBAAmB,KAAK;AAAA,EACjC,IAAI;AAAA,EACJ,aAAa;AAAA,EACb,OAAO;AAAA,IACH,aAAa;AAAA,EACjB;AAAA,EACA,KAAK,8BAAO,YAAiC;AACzC,UAAM,EAAE,UAAU,WAAW,QAAQ,MAAM,IAAI;AAG/C,QAAI,CAAC,UAAU;AACX,YAAM,IAAI,MAAM,uBAAuB;AAAA,IAC3C;AAGA,QAAI,mBAAmB;AACvB,QAAI,UAAU,SAAS,GAAG,GAAG;AACzB,YAAM,QAAQ,UAAU,MAAM,GAAG,EAAE,IAAI,MAAM;AAC7C,UAAI,MAAM,WAAW,GAAG;AACpB,2BAAmB,MAAM,CAAC,IAAI,OAAO,MAAM,CAAC,IAAI,KAAK,MAAM,CAAC;AAAA,MAChE,WAAW,MAAM,WAAW,GAAG;AAC3B,2BAAmB,MAAM,CAAC,IAAI,KAAK,MAAM,CAAC;AAAA,MAC9C;AAAA,IACJ,OAAO;AACH,yBAAmB,WAAW,SAAS,KAAK;AAAA,IAChD;AASA,WAAO;AAAA,MACH;AAAA,MACA;AAAA,MACA,UAAU;AAAA;AAAA,MACV,WAAW;AAAA,MACX,QAAQ;AAAA,MACR,SAAS;AAAA,IACb;AAAA,EACJ,GApCK;AAqCT,CAAC;",
  "names": []
}
